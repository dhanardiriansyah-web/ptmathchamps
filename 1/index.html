<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Math Champs Placement Test</title>
    <style>
        :root {
            --primary: #FF9F1C; /* Math Champs Orange */
            --secondary: #2EC4B6; /* Teal/Blueish */
            --accent: #E71D36; /* Red for Hearts/Wrong */
            --success: #4CC9F0; /* Green/Success */
            --dark: #011627;
            --light: #FDFFFC;
            --bg: #f0f4f8;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: var(--bg);
            margin: 0;
            display: flex;
            justify-content: center;
            min-height: 100vh;
            color: var(--dark);
        }

        .container {
            width: 100%;
            max-width: 600px;
            background: white;
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
            display: flex;
            flex-direction: column;
            overflow: hidden;
            position: relative;
        }

        /* HEADER */
        header {
            background: white;
            padding: 15px;
            border-bottom: 2px solid #eee;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .logo {
            height: 50px;
            object-fit: contain;
        }

        .status-bar {
            display: flex;
            gap: 15px;
            font-weight: bold;
            font-size: 0.9rem;
        }

        .status-item {
            display: flex;
            align-items: center;
            gap: 5px;
            background: #f5f5f5;
            padding: 5px 10px;
            border-radius: 20px;
        }

        .heart { color: var(--accent); }
        
        /* Timer hidden visually but logic remains */
        .timer-hidden { display: none; } 

        /* SCREENS */
        .screen {
            flex: 1;
            padding: 25px;
            display: none; /* Hidden by default */
            flex-direction: column;
            align-items: center;
            text-align: center;
            overflow-y: auto;
        }

        .screen.active {
            display: flex;
        }

        /* START SCREEN */
        .welcome-hero {
            margin-bottom: 30px;
        }
        
        h1 { color: var(--primary); margin-bottom: 10px; }
        h2 { font-size: 1.2rem; color: #666; font-weight: normal; }

        .rules-box {
            background: #fff3cd;
            border: 1px solid #ffeeba;
            padding: 15px;
            border-radius: 10px;
            text-align: left;
            margin-bottom: 20px;
            font-size: 0.9rem;
        }

        /* QUIZ SCREEN */
        .level-badge {
            background: var(--secondary);
            color: white;
            padding: 5px 15px;
            border-radius: 15px;
            font-size: 0.8rem;
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 15px;
        }

        .progress-bar-container {
            width: 100%;
            height: 8px;
            background: #eee;
            border-radius: 4px;
            margin-bottom: 25px;
        }

        .progress-bar {
            height: 100%;
            background: var(--primary);
            width: 0%;
            border-radius: 4px;
            transition: width 0.3s ease;
        }

        .question-box {
            font-size: 1.2rem;
            font-weight: 600;
            margin-bottom: 30px;
            line-height: 1.5;
            width: 100%;
            text-align: left;
        }

        .options-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            width: 100%;
        }

        .option-btn {
            background: white;
            border: 2px solid #eee;
            padding: 15px;
            border-radius: 12px;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.2s;
            font-weight: 500;
            position: relative;
        }

        .option-btn:hover:not(:disabled) {
            border-color: var(--secondary);
            background: #f0fffd;
        }

        .option-btn:active:not(:disabled) {
            transform: scale(0.98);
        }

        /* States for answers */
        .option-btn.correct {
            background-color: #d4edda;
            border-color: #28a745;
            color: #155724;
        }

        .option-btn.wrong {
            background-color: #f8d7da;
            border-color: #dc3545;
            color: #721c24;
        }
        
        .option-btn:disabled {
            cursor: default;
            opacity: 0.7;
        }

        /* FEEDBACK SECTION */
        .feedback-container {
            margin-top: 25px;
            width: 100%;
            display: none; /* Hidden until answered */
            flex-direction: column;
            align-items: center;
            gap: 15px;
            animation: fadeIn 0.3s ease;
        }

        .feedback-msg {
            font-weight: bold;
            font-size: 1.1rem;
        }

        /* RESULT SCREEN */
        .result-card {
            background: linear-gradient(135deg, var(--primary), #FF7D00);
            color: white;
            padding: 30px;
            border-radius: 20px;
            width: 100%;
            margin-bottom: 20px;
            box-shadow: 0 10px 20px rgba(255, 159, 28, 0.3);
        }

        .placement-level {
            font-size: 2rem;
            font-weight: bold;
            margin: 10px 0;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.2);
        }

        .stats-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            width: 100%;
            margin-top: 20px;
        }

        .stat-box {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 10px;
            text-align: center;
        }

        .stat-value {
            font-size: 1.5rem;
            font-weight: bold;
            color: var(--dark);
        }
        
        .stat-label {
            font-size: 0.8rem;
            color: #666;
        }

        /* GENERAL UI */
        .btn {
            background: var(--primary);
            color: white;
            border: none;
            padding: 15px 40px;
            font-size: 1.1rem;
            border-radius: 30px;
            cursor: pointer;
            font-weight: bold;
            box-shadow: 0 5px 15px rgba(255, 159, 28, 0.4);
            transition: transform 0.2s;
        }

        .btn:hover {
            transform: translateY(-2px);
            filter: brightness(1.1);
        }
        
        .btn-next {
            background: var(--secondary);
            box-shadow: 0 5px 15px rgba(46, 196, 182, 0.4);
            width: 100%;
        }

        /* Utility for Math */
        .fraction {
            display: inline-block;
            text-align: center;
            vertical-align: middle;
            font-size: 0.9em;
        }
        .fraction > span {
            display: block;
            padding: 0 2px;
        }
        .fraction span.bottom {
            border-top: thin solid black;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @media (max-width: 480px) {
            .options-grid {
                grid-template-columns: 1fr;
            }
            .question-box {
                font-size: 1.1rem;
            }
        }
    </style>
</head>
<body>

<div class="container">
    <header>
        <img src="https://imgix3.ruangguru.com/assets/miscellaneous/png_aaojxe_9962.png" alt="Math Champs" class="logo">
        <div class="status-bar" id="statusBar" style="visibility: hidden;">
            <div class="status-item">
                <span class="heart">‚ù§Ô∏è</span> <span id="livesDisplay">3</span>
            </div>
            <!-- Timer hidden from UI but exists in logic -->
        </div>
    </header>

    <!-- SCREEN 1: START -->
    <div id="startScreen" class="screen active">
        <div class="welcome-hero">
            <h1>Placement Test</h1>
            <h2>Temukan level Math Champs kamu!</h2>
        </div>

        <div class="rules-box">
            <h3>Cara Bermain:</h3>
            <ul style="padding-left: 20px;">
                <li>Kamu punya <strong>3 Nyawa</strong>.</li>
                <li>Setiap jawaban salah akan mengurangi nyawa.</li>
                <li>Jika nyawa habis, tes berhenti dan levelmu ditentukan saat itu juga.</li>
                <li>Kerjakan dengan tenang dan jujur.</li>
                <!-- Removed explicit time limit rule -->
            </ul>
        </div>

        <button class="btn" onclick="startGame()">Mulai Tes</button>
    </div>

    <!-- SCREEN 2: GAME -->
    <div id="gameScreen" class="screen">
        <div class="level-badge" id="currentLevelName">Level D1</div>
        <div class="progress-bar-container">
            <div class="progress-bar" id="progressBar"></div>
        </div>
        
        <div class="question-box" id="questionText">
            <!-- Soal akan muncul di sini -->
        </div>

        <div class="options-grid" id="optionsContainer">
            <!-- Pilihan akan muncul di sini -->
        </div>

        <!-- Feedback & Next Button Area -->
        <div class="feedback-container" id="feedbackArea">
            <div class="feedback-msg" id="feedbackMessage">Jawaban Benar!</div>
            <button class="btn btn-next" id="nextBtn" onclick="nextQuestion()">Soal Berikutnya</button>
        </div>
    </div>

    <!-- SCREEN 3: RESULT -->
    <div id="resultScreen" class="screen">
        <h2>Tes Selesai!</h2>
        <p>Berdasarkan performa kamu, kamu direkomendasikan masuk ke:</p>
        
        <div class="result-card">
            <div>LEVEL KAMU:</div>
            <div class="placement-level" id="finalPlacement">MASTERY 1</div>
        </div>

        <div class="stats-grid">
            <div class="stat-box">
                <div class="stat-value" id="finalScore">0/60</div>
                <div class="stat-label">Soal Terjawab</div>
            </div>
            <div class="stat-box">
                <div class="stat-value" id="timeUsed">00:00</div>
                <div class="stat-label">Waktu Digunakan</div>
            </div>
        </div>

        <p style="margin-top: 20px; font-size: 0.9rem; color: #666;">
            Silakan screenshot hasil ini dan kirimkan ke admin Math Champs.
        </p>
        
        <!-- Removed Retry Button as requested -->
    </div>
</div>

<script>
    // --- DATABASE SOAL (60 Soal) ---
    const questions = [
        // ==========================================
        // LEVEL D1
        // ==========================================
        {
            level: "Discovery 1",
            text: "Lingkari bilangan yang <b>lebih besar</b> dari 12 tetapi <b>lebih kecil</b> dari 15.",
            options: ["11", "16", "13", "10"],
            answer: 2 // 13
        },
        {
            level: "Discovery 1",
            text: "Perhatikan pola berikut: ‚ñ≥, ‚óã, ‚óã, ‚ñ≥, ‚óã, ‚óã, ‚ñ≥, ... <br>Gambar apakah yang ada di urutan ke-10?",
            options: ["‚ñ≥ (Segitiga)", "‚óã (Lingkaran)", "‚ñ° (Kotak)", "‚òÜ (Bintang)"],
            answer: 0 
        },
        {
            level: "Discovery 1",
            text: "Adi memiliki 8 stiker. Budi memiliki 3 stiker <b>lebih sedikit</b> daripada Adi.<br>Berapa jumlah stiker Budi?",
            options: ["11", "5", "3", "8"],
            answer: 1 
        },
        {
            level: "Discovery 1",
            text: "Jika ‚ñ° + ‚ñ° = 10 dan ‚ñ° + ‚ñ≥ = 8, berapakah nilai ‚ñ≥?",
            options: ["5", "3", "2", "4"],
            answer: 1 
        },
        {
            level: "Discovery 1",
            text: "Ada 5 anak sedang antre membeli es krim. Siti ada di depan Rudi. Eko ada di belakang Rudi. Ani ada di paling depan.<br>Siapakah yang ada di urutan ke-3?",
            options: ["Ani", "Siti", "Rudi", "Eko"],
            answer: 2 
        },
        
        // ==========================================
        // LEVEL D2
        // ==========================================
        {
            level: "Discovery 2",
            text: "Jarum panjang menunjuk angka 6. Jarum pendek berada di tengah-tengah antara angka 2 dan 3.<br>Pukul berapakah itu?",
            options: ["02.00", "03.00", "02.30", "03.30"],
            answer: 2
        },
        {
            level: "Discovery 2",
            text: "Tuliskan bentuk penjumlahan berulang dari 4 √ó 3.",
            options: ["4 + 4 + 4", "3 + 3 + 3 + 3", "4 + 3", "3 √ó 3 √ó 3 √ó 3"],
            answer: 1 
        },
        {
            level: "Discovery 2",
            text: "Ibu memotong pizza menjadi 4 bagian yang <b>tidak</b> sama besar. Adik mengambil 1 potong.<br>Apakah Adik memakan 1/4 bagian pizza?",
            options: ["Ya", "Tidak", "Mungkin", "Tidak Tahu"],
            answer: 1
        },
        {
            level: "Discovery 2",
            text: "Aku adalah sebuah bilangan. Jika kamu menambahkan 5 kepadaku, lalu dikurangi 2, hasilnya adalah 20.<br>Bilangan berapakah aku?",
            options: ["15", "17", "23", "13"],
            answer: 1 
        },
        {
            level: "Discovery 2",
            text: "Tali Merah panjangnya 15 meter. Tali Biru 6 meter <b>lebih panjang</b> dari Tali Merah. Tali Hijau 4 meter <b>lebih pendek</b> dari Tali Biru.<br>Berapa panjang Tali Hijau?",
            options: ["21 m", "17 m", "11 m", "15 m"],
            answer: 1 
        },

        // ==========================================
        // LEVEL D3
        // ==========================================
        {
            level: "Discovery 3",
            text: "Aku adalah bilangan ganjil antara 400 dan 410. Digit satuanku adalah 5.<br>Bilangan berapakah aku?",
            options: ["405", "415", "403", "450"],
            answer: 0
        },
        {
            level: "Discovery 3",
            text: "Tinggi badan Ali 1 m 20 cm. Tinggi badan Budi 105 cm.<br>Siapakah yang lebih tinggi dan berapa selisihnya dalam cm?",
            options: ["Ali, 15 cm", "Budi, 15 cm", "Ali, 25 cm", "Budi, 25 cm"],
            answer: 0 
        },
        {
            level: "Discovery 3",
            text: "Andi ingin membeli mainan seharga Rp 2.500. Ia hanya memiliki koin Rp 500.<br>Berapa keping koin yang harus ia bayarkan?",
            options: ["4", "5", "6", "3"],
            answer: 1
        },
        {
            level: "Discovery 3",
            text: "Di perpustakaan ada 350 buku cerita dan buku pelajaran. Jumlah buku cerita ada 120 lebih banyak daripada buku pelajaran.<br>Berapa jumlah buku pelajaran?",
            options: ["115", "235", "120", "230"],
            answer: 0 
        },
        {
            level: "Discovery 3",
            text: "Sebuah tiang dipancangkan ke tanah. Setengah bagian ada di dalam tanah, 2 meter ada di dalam air, dan sisanya 3 meter muncul di udara.<br>Berapa meter panjang total tiang tersebut?",
            options: ["5 m", "10 m", "12 m", "8 m"],
            answer: 1 
        },

        // ==========================================
        // LEVEL D4
        // ==========================================
        {
            level: "Discovery 4",
            text: "Dari grafik batang 'Hobi Siswa', batang 'Sepak Bola' tingginya di tengah-tengah antara garis 20 dan 30.<br>Berapa siswa yang suka sepak bola?",
            options: ["20", "25", "30", "50"],
            answer: 1
        },
        {
            level: "Discovery 4",
            text: "Film dimulai pukul 14.45 dan berlangsung selama 1 jam 30 menit.<br>Pukul berapa film tersebut selesai?",
            options: ["16.00", "15.15", "16.15", "15.45"],
            answer: 2 
        },
        {
            level: "Discovery 4",
            text: "Sebuah bilangan dibagi 4 menghasilkan 12 dengan sisa 3.<br>Bilangan berapakah itu?",
            options: ["45", "48", "51", "52"],
            answer: 2 
        },
        {
            level: "Discovery 4",
            text: "Berapa banyak bilangan 2-digit yang dapat dibentuk dari angka 3, 5, dan 8 jika angka <b>tidak boleh</b> berulang? (Tuliskan semua kemungkinannya)",
            options: ["3 bilangan", "5 bilangan", "6 bilangan", "9 bilangan"],
            answer: 2 
        },
        {
            level: "Discovery 4",
            text: "Umur Ayah 4 kali umur Ani. Jika selisih umur mereka 27 tahun, berapakah umur Ani?",
            options: ["9 tahun", "7 tahun", "27 tahun", "36 tahun"],
            answer: 0 
        },

        // ==========================================
        // LEVEL E1
        // ==========================================
        {
            level: "Exploration 1",
            text: "Sebuah persegi memiliki keliling 20 cm.<br>Berapakah panjang sisinya?",
            options: ["4 cm", "5 cm", "10 cm", "20 cm"],
            answer: 1
        },
        {
            level: "Exploration 1",
            text: "Jumlah penonton konser adalah 4.582 orang. Jika dibulatkan ke <b>ratusan</b> terdekat, berapakah jumlahnya?",
            options: ["4.500", "4.600", "4.580", "5.000"],
            answer: 1
        },
        {
            level: "Exploration 1",
            text: "Lantai kamar berbentuk persegi panjang dengan luas 24 m¬≤. Jika lebarnya 4 m, berapakah keliling kamar tersebut?",
            options: ["20 m", "10 m", "12 m", "24 m"],
            answer: 0 
        },
        {
            level: "Exploration 1",
            text: "Dua buah persegi memiliki sisi masing-masing 5 cm dan 3 cm. Persegi kecil diletakkan di atas persegi besar.<br>Berapakah luas daerah yang <b>tidak</b> tertutup oleh persegi kecil?",
            options: ["16 cm¬≤", "9 cm¬≤", "25 cm¬≤", "34 cm¬≤"],
            answer: 0 
        },
        {
            level: "Exploration 1",
            text: "Dua bilangan jika dijumlahkan hasilnya 2.500. Jika selisih kedua bilangan itu adalah 500, berapakah bilangan yang <b>terkecil</b>?",
            options: ["1.000", "1.500", "500", "2.000"],
            answer: 0 
        },

        // ==========================================
        // LEVEL E2
        // ==========================================
        {
            level: "Exploration 2",
            text: "Pukul 03.00 membentuk sudut 90 derajat. Jenis sudut apakah yang terbentuk pada pukul 01.00?",
            options: ["Siku-siku", "Tumpul", "Lancip", "Lurus"],
            answer: 2
        },
        {
            level: "Exploration 2",
            text: "Di kelas ada 30 siswa. 2/3 dari siswa adalah perempuan.<br>Berapa jumlah siswa laki-laki?",
            options: ["20", "10", "15", "5"],
            answer: 1 
        },
        {
            level: "Exploration 2",
            text: "Sebuah gayung berisi 1 liter air. Air tersebut dituang ke 3 gelas masing-masing berisi 250 ml.<br>Berapa ml sisa air di gayung?",
            options: ["0 ml", "250 ml", "500 ml", "750 ml"],
            answer: 1 
        },
        {
            level: "Exploration 2",
            text: "Ibu membuat kue. 1/2 bagian diberikan ke nenek. 1/2 <b>dari sisanya</b> dimakan adik.<br>Berapa bagian kue yang masih tersisa sekarang?",
            options: ["1/4", "1/2", "0", "3/4"],
            answer: 0
        },
        {
            level: "Exploration 2",
            text: "Hitunglah besar sudut terkecil yang dibentuk oleh jarum jam pada pukul 04.00! (Ingat: 1 putaran penuh = 360¬∞)",
            options: ["90¬∞", "100¬∞", "120¬∞", "150¬∞"],
            answer: 2 
        },

        // ==========================================
        // LEVEL E3
        // ==========================================
        {
            level: "Exploration 3",
            text: "Ubahlah 0,75 menjadi bentuk persen.",
            options: ["7,5%", "75%", "0,75%", "750%"],
            answer: 1
        },
        {
            level: "Exploration 3",
            text: "Hitunglah: 3 - 1 <span class='fraction'><span>2</span><span class='bottom'>5</span></span> = ...",
            options: ["1 2/5", "1 3/5", "2 3/5", "2 2/5"],
            answer: 1 
        },
        {
            level: "Exploration 3",
            text: "Diskon 20% diberikan untuk baju seharga Rp 50.000.<br>Berapa rupiah besar potongan harganya?",
            options: ["Rp 10.000", "Rp 40.000", "Rp 20.000", "Rp 5.000"],
            answer: 0
        },
        {
            level: "Exploration 3",
            text: "Suatu bilangan dikalikan 4, lalu ditambah 8, hasilnya dibagi 2 menjadi 20.<br>Bilangan berapakah itu?",
            options: ["8", "10", "12", "6"],
            answer: 0 
        },
        {
            level: "Exploration 3",
            text: "Awalnya ember A berisi 4 liter air lebih banyak dari ember B. Kemudian, 1 liter air dipindahkan dari A ke B.<br>Berapa selisih air di kedua ember sekarang?",
            options: ["2 liter", "3 liter", "4 liter", "0 liter"],
            answer: 0 
        },

        // ==========================================
        // LEVEL E4
        // ==========================================
        {
            level: "Exploration 4",
            text: "Nilai tempat angka 7 pada bilangan 14,375 adalah ...",
            options: ["Satuan", "Persepuluhan", "Perseratusan", "Perseribuan"],
            answer: 2
        },
        {
            level: "Exploration 4",
            text: "Volume sebuah balok adalah 240 cm¬≥. Jika luas alasnya adalah 60 cm¬≤, berapakah tinggi balok tersebut?",
            options: ["4 cm", "40 cm", "24 cm", "6 cm"],
            answer: 0
        },
        {
            level: "Exploration 4",
            text: "Suhu udara naik 2¬∞C setiap jam dari pukul 08.00 sampai 11.00. Jika suhu pukul 08.00 adalah 24¬∞C, berapa suhu pukul 11.00?",
            options: ["26¬∞C", "28¬∞C", "30¬∞C", "32¬∞C"],
            answer: 2 
        },
        {
            level: "Exploration 4",
            text: "Sebuah tangki berbentuk kubus dengan rusuk 10 cm berisi air penuh. Sebuah batu dimasukkan sehingga air tumpah sebanyak 250 ml.<br>Berapakah volume batu tersebut dalam cm¬≥?",
            options: ["250 cm¬≥", "100 cm¬≥", "25 cm¬≥", "1000 cm¬≥"],
            answer: 0
        },
        {
            level: "Exploration 4",
            text: "Tali sepanjang 10 meter dipotong menjadi 4 bagian sama panjang. Setiap bagian kemudian dipotong lagi menjadi 2 bagian sama panjang.<br>Berapa meter panjang setiap potongan kecil tersebut?",
            options: ["1.25 m", "2.5 m", "1 m", "0.5 m"],
            answer: 0 
        },

        // ==========================================
        // LEVEL M1
        // ==========================================
        {
            level: "Mastery 1",
            text: "Sederhanakan rasio 12 : 18 : 24.",
            options: ["2 : 3 : 4", "1 : 2 : 3", "3 : 4 : 5", "6 : 9 : 12"],
            answer: 0
        },
        {
            level: "Mastery 1",
            text: "Sebuah segitiga memiliki luas 30 cm¬≤. Jika alasnya 10 cm, berapakah tingginya?",
            options: ["3 cm", "6 cm", "15 cm", "60 cm"],
            answer: 1 
        },
        {
            level: "Mastery 1",
            text: "Mobil A melaju dengan kecepatan 60 km/jam. Mobil B melaju 1 km setiap menit.<br>Mobil manakah yang lebih cepat?",
            options: ["Mobil A", "Mobil B", "Sama Cepat", "Tidak tahu"],
            answer: 2 
        },
        {
            level: "Mastery 1",
            text: "Perbandingan uang A dan B adalah 3:5. Jika B memberikan Rp 10.000 kepada A, uang mereka menjadi sama banyak.<br>Berapakah total uang mereka?",
            options: ["Rp 40.000", "Rp 80.000", "Rp 160.000", "Rp 100.000"],
            answer: 1 
        },
        {
            level: "Mastery 1",
            text: "Budi berangkat ke kota Z dengan kecepatan 40 km/jam. Ia kembali dari kota Z dengan kecepatan 60 km/jam.<br>Apakah kecepatan rata-rata perjalanan Budi adalah 50 km/jam? Jelaskan dengan hitungan.",
            options: ["50 km/jam", "48 km/jam", "55 km/jam", "100 km/jam"],
            answer: 1 
        },

        // ==========================================
        // LEVEL M2
        // ==========================================
        {
            level: "Mastery 2",
            text: "Hitunglah: 20 - 12 √∑ 4 + 3 √ó 2 = ...",
            options: ["23", "11", "16", "22"],
            answer: 0 
        },
        {
            level: "Mastery 2",
            text: "Dua garis sejajar dipotong oleh garis lain. Jika salah satu sudut dalam berseberangan besarnya 65¬∞, berapakah besar sudut pasangannya?",
            options: ["115¬∞", "65¬∞", "25¬∞", "90¬∞"],
            answer: 1
        },
        {
            level: "Mastery 2",
            text: "Rata-rata dari 4 bilangan adalah 9. Jika salah satu bilangan dibuang, rata-ratanya menjadi 8.<br>Berapakah bilangan yang dibuang tersebut?",
            options: ["11", "12", "13", "10"],
            answer: 1 
        },
        {
            level: "Mastery 2",
            text: "Di kandang ada ayam dan kambing. Total ada 10 kepala dan 28 kaki.<br>Berapa banyak kambing di kandang tersebut?",
            options: ["4 ekor", "6 ekor", "5 ekor", "8 ekor"],
            answer: 0 
        },
        {
            level: "Mastery 2",
            text: "Sebuah segitiga sama kaki memiliki satu sudut sebesar 40¬∞. Berapakah kemungkinan besar sudut-sudut lainnya?",
            options: ["40¬∞ dan 100¬∞", "70¬∞ dan 70¬∞", "Keduanya benar", "Salah semua"],
            answer: 2
        },

        // ==========================================
        // LEVEL M3
        // ==========================================
        {
            level: "Mastery 3",
            text: "Jika y = 3, hitung nilai dari 2y¬≤ - 5.",
            options: ["7", "13", "31", "19"],
            answer: 1 
        },
        {
            level: "Mastery 3",
            text: "Perbandingan A:B = 2:3. Perbandingan B:C = 4:5. Tentukan perbandingan A:B:C!",
            options: ["2:3:5", "8:12:15", "8:12:10", "6:12:20"],
            answer: 1 
        },
        {
            level: "Mastery 3",
            text: "Harga bensin naik dari Rp 10.000 menjadi Rp 12.000. Berapa persen kenaikannya?",
            options: ["20%", "25%", "10%", "15%"],
            answer: 0
        },
        {
            level: "Mastery 3",
            text: "Pedagang menjual barang seharga Rp 120.000 dan untung 20% dari <b>harga beli</b>.<br>Berapakah harga beli barang tersebut?",
            options: ["Rp 100.000", "Rp 96.000", "Rp 144.000", "Rp 110.000"],
            answer: 0 
        },
        {
            level: "Mastery 3",
            text: "1/3 uang Andi sama dengan 2/5 uang Budi. Jika selisih uang mereka Rp 5.000, berapa total uang keduanya?",
            options: ["Rp 35.000", "Rp 55.000", "Rp 11.000", "Rp 25.000"],
            answer: 1 
        },

        // ==========================================
        // LEVEL M4
        // ==========================================
        {
            level: "Mastery 4",
            text: "Keliling sebuah roda adalah 132 cm. Berapakah jari-jari roda tersebut? (œÄ = 22/7)",
            options: ["21 cm", "14 cm", "42 cm", "7 cm"],
            answer: 0 
        },
        {
            level: "Mastery 4",
            text: "Sebuah persegi panjang dipotong setengah lingkaran pada salah satu sisinya. Jika panjang persegi panjang 14 cm dan lebar 10 cm, dan diameter setengah lingkaran adalah 14 cm, hitung keliling bangun gabungan tersebut!",
            options: ["56 cm", "60 cm", "64 cm", "72 cm"],
            answer: 0 
        },
        {
            level: "Mastery 4",
            text: "Dalam diagram lingkaran, sudut juring untuk 'Suka Matematika' adalah 90¬∞. Jika total siswa ada 40 orang, berapa siswa yang suka Matematika?",
            options: ["10 orang", "20 orang", "30 orang", "4 orang"],
            answer: 0 
        },
        {
            level: "Mastery 4",
            text: "Sebuah persegi dengan sisi 14 cm. Di dalamnya digambar 4 buah lingkaran identik yang saling bersinggungan. Hitunglah luas daerah di antara lingkaran-lingkaran tersebut!",
            options: ["42 cm¬≤", "154 cm¬≤", "196 cm¬≤", "84 cm¬≤"],
            answer: 0 
        },
        {
            level: "Mastery 4",
            text: "Sebuah bak mandi berbentuk balok (100cm x 60cm x 80cm) berisi air setengahnya. Sebuah kubus besi rusuk 20 cm dimasukkan ke dalam bak.<br>Berapa cm kenaikan tinggi air dalam bak tersebut?",
            options: ["1 cm", "2 cm", "1.33 cm", "1.5 cm"],
            answer: 2 
        }
    ];

    // --- GAME STATE ---
    let currentQuestionIndex = 0;
    let lives = 3;
    let timerInterval;
    let timeRemaining = 3600; // 60 minutes in seconds (hidden but active)
    let correctAnswers = 0;
    let isAnswering = true; // Block clicks after answering

    // --- DOM ELEMENTS ---
    const startScreen = document.getElementById('startScreen');
    const gameScreen = document.getElementById('gameScreen');
    const resultScreen = document.getElementById('resultScreen');
    const questionText = document.getElementById('questionText');
    const optionsContainer = document.getElementById('optionsContainer');
    const progressBar = document.getElementById('progressBar');
    const currentLevelName = document.getElementById('currentLevelName');
    const livesDisplay = document.getElementById('livesDisplay');
    const statusBar = document.getElementById('statusBar');
    
    // Feedback Elements
    const feedbackArea = document.getElementById('feedbackArea');
    const feedbackMessage = document.getElementById('feedbackMessage');
    const nextBtn = document.getElementById('nextBtn');

    // --- FUNCTIONS ---

    function startGame() {
        startScreen.classList.remove('active');
        gameScreen.classList.add('active');
        statusBar.style.visibility = 'visible';
        
        currentQuestionIndex = 0;
        lives = 3;
        correctAnswers = 0;
        timeRemaining = 3600; // 60 mins
        updateStats();

        // Start invisible timer
        if (timerInterval) clearInterval(timerInterval);
        timerInterval = setInterval(updateTimerLogic, 1000);
        
        loadQuestion();
    }

    function updateTimerLogic() {
        timeRemaining--;
        // Auto-end if time is up
        if (timeRemaining <= 0) {
            endGame(false, true); // false = not completed all, true = timeout
        }
    }

    function updateStats() {
        livesDisplay.innerText = lives;
        // Update progress bar
        const progress = ((currentQuestionIndex) / questions.length) * 100;
        progressBar.style.width = `${progress}%`;
    }

    function loadQuestion() {
        // Reset UI State for new question
        feedbackArea.style.display = 'none';
        isAnswering = true;
        
        if (currentQuestionIndex >= questions.length) {
            endGame(true); // Completed all questions
            return;
        }

        const q = questions[currentQuestionIndex];
        currentLevelName.innerText = q.level;
        questionText.innerHTML = `${currentQuestionIndex + 1}. ${q.text}`;
        
        optionsContainer.innerHTML = '';
        q.options.forEach((opt, index) => {
            const btn = document.createElement('button');
            btn.className = 'option-btn';
            btn.innerHTML = opt;
            btn.onclick = () => checkAnswer(index, btn);
            optionsContainer.appendChild(btn);
        });

        updateStats();
    }

    function checkAnswer(selectedIndex, btnElement) {
        if (!isAnswering) return; // Prevent multiple clicks
        isAnswering = false;

        const q = questions[currentQuestionIndex];
        const allButtons = document.querySelectorAll('.option-btn');
        
        // Disable all buttons to prevent changing answer
        allButtons.forEach(b => b.disabled = true);

        if (selectedIndex === q.answer) {
            // CORRECT
            btnElement.classList.add('correct');
            feedbackMessage.innerText = "Jawaban Benar! üéâ";
            feedbackMessage.style.color = "var(--secondary)";
            correctAnswers++;
            
            // Setup Next Button
            nextBtn.innerText = "Soal Berikutnya";
            nextBtn.onclick = nextQuestion;
        } else {
            // WRONG
            btnElement.classList.add('wrong');
            lives--;
            updateStats();
            
            if (lives <= 0) {
                feedbackMessage.innerText = "Salah! Nyawa Habis üíî";
                feedbackMessage.style.color = "var(--accent)";
                // Change Next Button behavior to finish
                nextBtn.innerText = "Lihat Hasil";
                nextBtn.onclick = () => endGame(false);
            } else {
                feedbackMessage.innerText = "Jawaban Salah üòî";
                feedbackMessage.style.color = "var(--accent)";
                nextBtn.innerText = "Soal Berikutnya";
                nextBtn.onclick = nextQuestion;
            }
        }

        // Show toggle area
        feedbackArea.style.display = 'flex';
    }

    function nextQuestion() {
        currentQuestionIndex++;
        loadQuestion();
    }

    function endGame(completed = false, timeout = false) {
        clearInterval(timerInterval);
        gameScreen.classList.remove('active');
        resultScreen.classList.add('active');
        statusBar.style.visibility = 'hidden';

        // Logic placement
        let finalLevel = "";
        
        if (completed) {
            finalLevel = "MASTERY 4 (GRADUATED)";
        } else {
            // Get level of the current question where they stopped/died
            let idx = Math.min(currentQuestionIndex, questions.length - 1);
            finalLevel = questions[idx].level;
        }

        document.getElementById('finalPlacement').innerText = finalLevel;
        document.getElementById('finalScore').innerText = `${correctAnswers}/${questions.length}`;
        
        // Calc time used
        let timeUsedSeconds = 3600 - timeRemaining;
        if (timeout) timeUsedSeconds = 3600;
        
        let m = Math.floor(timeUsedSeconds / 60);
        let s = timeUsedSeconds % 60;
        document.getElementById('timeUsed').innerText = `${m}m ${s}s`;
    }

</script>
</body>
</html>
